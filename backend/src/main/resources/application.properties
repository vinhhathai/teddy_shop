# Shop G·∫•u B√¥ng - Application Configuration
# C·∫•u h√¨nh ·ª©ng d·ª•ng cho h·ªá th·ªëng b√°n g·∫•u b√¥ng

# ===============================
# SERVER CONFIGURATION
# ===============================
server.port=8080
server.servlet.context-path=/api

# ===============================
# DATABASE - MySQL
# ===============================
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/shop_gau_bong?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC&createDatabaseIfNotExist=true&useUnicode=true&characterEncoding=utf8mb4&connectionCollation=utf8mb4_unicode_ci&autoReconnect=true}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:yourpassword}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=60000

# ===============================
# JPA/HIBERNATE CONFIGURATION
# ===============================
# Hibernate DDL auto (create, create-drop, validate, update, none)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
# üß© ·∫®n SQL chi ti·∫øt 
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.use_sql_comments=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# UTF-8 Character Encoding Configuration
spring.jpa.properties.hibernate.connection.characterEncoding=utf8mb4
spring.jpa.properties.hibernate.connection.useUnicode=true
spring.jpa.properties.hibernate.connection.CharSet=utf8mb4

# ===============================
# SQL INITIALIZATION
# ===============================
# Initialize database with schema and data - DISABLED to prevent font encoding issues
spring.sql.init.mode=never
# spring.sql.init.schema-locations=classpath:schema.sql
# spring.sql.init.data-locations=classpath:data.sql
# spring.sql.init.continue-on-error=false

# ===============================
# JWT CONFIGURATION
# ===============================
# JWT Secret Key (In production, use environment variable)
jwt.secret=${JWT_SECRET:shopGauBongSecretKey2024VeryLongAndSecureKeyForJWTTokenGeneration}
jwt.expiration=${JWT_EXPIRATION:86400000}
# JWT expiration time in milliseconds (24 hours = 86400000ms)

# ===============================
# GOOGLE OAUTH CONFIGURATION
# ===============================
# Google OAuth Client ID (Replace with your actual client ID)
google.oauth.client-id=${GOOGLE_CLIENT_ID:YOUR_GOOGLE_CLIENT_ID_HERE}

# ===============================
# VNPAY PAYMENT CONFIGURATION
# ===============================
# VNPay Sandbox Configuration (For Testing)
vnpay.url=${VNPAY_PAY_URL:https://sandbox.vnpayment.vn/paymentv2/vpcpay.html}
vnpay.return-url=${VNPAY_RETURN_URL:http://localhost:3000/payment/vnpay-return}
vnpay.tmn-code=${VNPAY_TMN_CODE:DEMOSANDBOX}
vnpay.hash-secret=${VNPAY_HASH_SECRET:DEMOSANDBOXSECRET}
vnpay.api-url=https://sandbox.vnpayment.vn/merchant_webapi/api/transaction

# Production VNPay Configuration (Replace with your credentials)
# vnpay.url=https://vnpayment.vn/paymentv2/vpcpay.html
# vnpay.return-url=https://yourdomain.com/payment/vnpay-return
# vnpay.tmn-code=YOUR_TMN_CODE
# vnpay.hash-secret=YOUR_HASH_SECRET
# vnpay.api-url=https://vnpayment.vn/merchant_webapi/api/transaction

# ===============================
# OPENAI GPT CONFIGURATION
# ===============================
# OpenAI API Key (Get from https://platform.openai.com/api-keys)
openai.api-key=${OPENAI_API_KEY:your-openai-key-here}
openai.model=${OPENAI_MODEL:gpt-3.5-turbo}
openai.max-tokens=${OPENAI_MAX_TOKENS:500}
openai.temperature=${OPENAI_TEMPERATURE:0.7}

# ===============================
# CORS CONFIGURATION
# ===============================
# Allow frontend origin
cors.allowed-origins=http://localhost:3000,http://127.0.0.1:3000
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true

# ===============================
# FILE UPLOAD CONFIGURATION
# ===============================
# Maximum file size for uploads
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# File storage path (relative to application root)
file.upload-dir=uploads/
file.upload.product-images=uploads/products/
file.upload.user-avatars=uploads/users/

# ===============================
# LOGGING CONFIGURATION (Clean logs)
# ===============================

# Ch·ªâ hi·ªÉn th·ªã WARN tr·ªü l√™n cho to√†n h·ªá th·ªëng
logging.level.root=WARN

# üß© G·ªçn log t·ªïng th·ªÉ 
logging.level.org.springframework=INFO

# Hi·ªÉn th·ªã chi ti·∫øt request API (Spring Web)
logging.level.org.springframework.web=INFO

# Hi·ªÉn th·ªã l·ªói b·∫£o m·∫≠t, nh∆∞ng kh√¥ng log chi ti·∫øt qu√°
logging.level.org.springframework.security=WARN

# üß© ·∫®n SQL chi ti·∫øt 
logging.level.org.hibernate.SQL=ERROR
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=ERROR

# Log ·ª©ng d·ª•ng c·ªßa b·∫°n (package ch√≠nh) - DEBUG ƒë·ªÉ xem chi ti·∫øt
logging.level.com.gaubong.teddybearshop=DEBUG

# üß© R√∫t g·ªçn log validation 
logging.level.org.springframework.web.servlet.mvc.method.annotation.DefaultHandlerExceptionResolver=ERROR

# File log (n·∫øu b·∫°n mu·ªën ghi ra file)
logging.file.name=logs/shop-gau-bong.log

# ===============================
# VALIDATION CONFIGURATION
# ===============================
# Enable validation
spring.validation.enabled=true

# ===============================
# JACKSON CONFIGURATION
# ===============================
# JSON serialization configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Ho_Chi_Minh
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss

# ===============================
# PAGINATION CONFIGURATION
# ===============================
# Default page size
app.pagination.default-page-size=10
app.pagination.max-page-size=100

# ===============================
# EMAIL CONFIGURATION (Optional)
# ===============================
# SMTP Configuration for email notifications
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-app-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Email templates
app.email.from=noreply@shopgaubong.com
app.email.support=support@shopgaubong.com

# ===============================
# PAYMENT CONFIGURATION
# ===============================
# Payment gateway settings (example for MoMo)
payment.momo.partner-code=YOUR_PARTNER_CODE
payment.momo.access-key=YOUR_ACCESS_KEY
payment.momo.secret-key=YOUR_SECRET_KEY
payment.momo.endpoint=https://test-payment.momo.vn/v2/gateway/api/create

# Bank transfer information
payment.bank.account-number=1234567890
payment.bank.account-name=SHOP GAU BONG
payment.bank.bank-name=Vietcombank
payment.bank.branch=Chi nhanh TP.HCM

# ===============================
# SHIPPING CONFIGURATION
# ===============================
# Shipping fees and policies
shipping.free-shipping-threshold=500000
shipping.default-fee=30000
shipping.express-fee=50000

# ===============================
# CACHE CONFIGURATION
# ===============================
# Enable caching
spring.cache.type=simple
spring.cache.cache-names=products,categories,users

# ===============================
# ACTUATOR CONFIGURATION
# ===============================
# Health check and monitoring endpoints
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.info.env.enabled=true

# ===============================
# APPLICATION INFO
# ===============================
info.app.name=Shop G·∫•u B√¥ng
info.app.description=H·ªá th·ªëng b√°n g·∫•u b√¥ng tr·ª±c tuy·∫øn
info.app.version=1.0.0
info.app.encoding=UTF-8
info.app.java.version=17

# ===============================
# DEVELOPMENT CONFIGURATION
# ===============================
# Enable development tools (disable in production)
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# ===============================
# PROFILE SPECIFIC CONFIGURATION
# ===============================
# Active profile (dev, test, prod)
spring.profiles.active=dev